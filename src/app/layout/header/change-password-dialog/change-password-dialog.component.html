<h2 mat-dialog-title>Change Password</h2>
<hr mat-dialog-title-divider/>

<form [formGroup]="changePassForm" (ngSubmit)="onSubmit()">
    <mat-dialog-content class="cp-form-container">
        <div class="row">
            <mat-form-field appearance="outline" class="col-12 mb-3">
                <mat-label>Current Password</mat-label>
                <input matInput [type]="hideCurrentPassword ? 'password' : 'text'" formControlName="currentPassword" autocomplete="current-password"/>
                <button mat-icon-button matSuffix type="button" (click)="hideCurrentPassword = !hideCurrentPassword">
                    <mat-icon>{{ hideCurrentPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                </button>
                <mat-error *ngIf="changePasswordControls['currentPassword'].touched && changePasswordControls['currentPassword'].hasError('required')">
                    Current password is required!
                </mat-error>
                <mat-error *ngIf="changePasswordControls['currentPassword'].hasError('minlength')">
                    Minimum 8 characters required
                </mat-error>
                <mat-error *ngIf="changePasswordControls['currentPassword'].hasError('maxlength')">
                    Maximum 20 characters allowed
                </mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline" class="col-12 mb-3">
                <mat-label>New Password</mat-label>
                <input matInput [type]="hideNewPassword ? 'password' : 'text'" formControlName="newPassword" autocomplete="new-password"/>
                <button mat-icon-button matSuffix type="button" (click)="hideNewPassword = !hideNewPassword">
                    <mat-icon>{{ hideNewPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                </button>
                <mat-error *ngIf="changePasswordControls['newPassword'].touched && changePasswordControls['newPassword'].hasError('required')">
                    New password is required!
                </mat-error>
                <mat-error *ngIf="changePasswordControls['newPassword'].hasError('minlength')">
                    Minimum 8 characters required
                </mat-error>
                <mat-error *ngIf="changePasswordControls['newPassword'].hasError('maxlength')">
                    Maximum 20 characters allowed
                </mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline" class="col-12 mb-3">
                <mat-label>Confirm Password</mat-label>
                <input matInput [type]="hideConfirmPassword ? 'password' : 'text'" formControlName="confirmPassword" autocomplete="confirm-password"/>
                <button mat-icon-button matSuffix type="button" (click)="hideConfirmPassword = !hideConfirmPassword"> 
                    <mat-icon>{{ hideConfirmPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                </button>
                <mat-error *ngIf="changePasswordControls['confirmPassword'].touched && changePasswordControls['confirmPassword'].hasError('required')">
                    Confirm password is required!
                </mat-error>
                <mat-error *ngIf="changePasswordControls['confirmPassword'].hasError('minlength')">
                    Minimum 8 characters required
                </mat-error>
                <mat-error *ngIf="changePasswordControls['confirmPassword'].hasError('maxlength')">
                    Maximum 20 characters allowed
                </mat-error>
                <mat-error *ngIf="changePasswordControls['confirmPassword'].hasError('mismatchPassword')">
                    New password and confirm password must match.
                </mat-error>
            </mat-form-field>
        </div>
    </mat-dialog-content>
    <mat-dialog-actions align="end">
        <button mat-button type="button" (click)="onCancel()">Cancel</button>
        <button mat-flat-button color="success" type="submit" [disabled]="changePassForm.invalid">Save</button>
    </mat-dialog-actions>
</form>